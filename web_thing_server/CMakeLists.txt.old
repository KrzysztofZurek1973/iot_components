set(srcs
	"simple_web_thing_server.c"
	"http_parser.c"
	"websocket.c"
	"web_thing.c"
	"web_thing_action.c"
	"web_thing_event.c"
	"web_thing_property.c"
	"web_thing_mdns.c"
	"web_thing_softap.c")
	
set (ota1 "OTA is enabled")
set (ota2 "OTA is NOT enabled")

if(CONFIG_ENABLE_OTA_UPDATE)
	message(STATUS ${ota1})
	set(requires mbedtls nvs_flash esp32_ota_update)
	#set(requires mbedtls nvs_flash)
	set(include_dirs "include" "../esp32_ota_update/include")
	#add_library(wts STATIC ${srcs})
	#add_library(ota STATIC esp32_ota_update.c)
	#target_link_libraries(wts PUBLIC ota)
else()
	message(STATUS ${ota2})	
	set(requires mbedtls mdns nvs_flash)
	set(include_dirs "include")
endif()



idf_component_register(SRCS "${srcs}"
                       INCLUDE_DIRS "${include_dirs}"
                       PRIV_REQUIRES "${requires}")
